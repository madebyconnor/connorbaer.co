{#
 # Homepage template
 # ---------------
 #
 # When this template gets loaded, it will be because someone has accessed
 # http://yoursite.com/ (without any URI). Craft checks to see if you have
 # a Single section set to be the Homepage (as you do, by default), and
 # loads the section’s Template (this file). A special ‘entry’ variable
 # will already be set for you, assigned to the Homepage entry.
 #
 # It's worth noting that even if you didn't have a Homepage Single section,
 # as long as this template remains at craft/templates/index.html, it
 # would still be the one to get loaded when accessing http://yoursite.com/,
 # albeit without an ‘entry’ variable already set for you.
 #
 # See this page for more details on how Craft routes requests:
 # http://craftcms.com/docs/routing
 #}


{% extends "_layouts/site" %}


{% import '_includes/elements' as elements %}
{% import '_includes/helpers' as helpers %}


{% set section = craft.app.request.segments | first %}


{% block body %}
  {% cache %}
  {% minify %}

  <article class="wfull cf">
    <header class="content-hero w100 ff-sans">
      <h1 class="ts-title1">{{ entry.title | capitalize }}</h1>
    </header>

    {% set projects = craft.entries.section(section).all() %}
    {% set lazyImage = false %}

    {% if projects %}
      {% for project in projects %}
        <section class="w100 mv3 ff-sans">
          <div class="mv2 r16-9">
            <a class="project-background" {% if project.color and project.color != '#000000' %}style="background-color: {{ project.color }}"{% endif %} href="{{ project.url }}" title="{{ project.title }}">

              {% set images = project.images %}

              {% if images %}
                {% for image in images %}
                  <div class="crd project-image">
                    {% if lazyImage %}
                      <img class="lazyload"
                           src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="
                           data-sizes="auto"
                           data-srcset="{{ image.getUrl('medium') }} {{ image.getWidth('medium') }}w, {{ image.getUrl('small') }} {{ image.getWidth('small') }}w"
                           alt="{{ image.title }}">
                    {% else %}
                      <img class="img-responsive"
                           src="{{ image.getUrl('medium') }}"
                           sizes="20vw"
                           srcset="{{ image.getUrl('medium') }} {{ image.getWidth('medium') }}w, {{ image.getUrl('small') }} {{ image.getWidth('small') }}w"
                           alt="{{ image.title }}">
                    {% endif %}
                  </div>
                {% endfor %}
              {% endif %}
            </a>
          </div>
          <p class="ts-app">{{ project.client }}</p>
          <h3 class="ts-title3"><a href="{{ project.url }}" title="{{ project.title }}">{{ project.title }}</a></h3>
        </section>
        {% set lazyImage = true %}
      {% endfor %}
    {% endif %}

  </article>

  {% endminify %}
  {% endcache %}
{% endblock %}
