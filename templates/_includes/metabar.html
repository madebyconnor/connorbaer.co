{#
 # Site Metabar include template
 # --------------------------------
 #
 # This template is used to output HTML for the site metabar.
 #
 # An `entry` variable is expected to be defined.
-#}


{% import '_includes/elements' as elements %}
{% import '_includes/helpers' as helpers %}


{% block metabar %}
  {% cache %}
  {% minify %}

  <header id="metabar" class="metabar w100">
    <div class="cf">
      <a class="metabar-brand ph2 fl-left" href="{{ siteUrl }}#" title="Home">
        {% include '_includes/logo' %}
        <h1 class="metabar-name">{{ siteName | split('Â·') | first }}</h1>
      </a>

      <div class="metabar-navigation fl-right">
        <input type="checkbox" id="metabar-toggle" class="metabar-toggle"/>
        <label for="metabar-toggle" class="metabar-label ph2 ts-body"><span data-open="{{ "Menu" | translate }}" data-close="{{ "Close" | translate }}"></span></label>

        <nav class="metabar-nav">
          <ul class="metabar-navList">

            {% for block in navigation.navigation %}
              {% switch block.type %}
                {% case "navExternal" %}
                  {% set navLink = block.navLink %}
                  {% set navTitle = block.navTitle %}
                {% default %}
                  {% set navLink = block.navEntry.one().url %}
                  {% set navTitle = block.navTitle ? block.navTitle : block.navEntry.one().title %}
              {% endswitch %}

              <li class="ph2">
                <a class="metabar-navLink{% if block.navEntry and craft.app.request.segments | first == block.navEntry.one().uri %} metabar-navActive{% endif %}{% if loop.last and navigation.button %} metabar-navButton{% endif %}" href="{{ navLink }}" title="{{ navTitle }}">{{ navTitle }}</a>
              </li>

            {% endfor %}

          </ul>
        </nav>

      </div>
    </div>
  </header>

  {% endminify %}
  {% endcache %}
{% endblock %}
